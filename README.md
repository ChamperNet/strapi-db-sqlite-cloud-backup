# strapi-db-sqlite-cloud-backup
Script for scheduled backup to Yandex Drive or Google Drive of a temporary copy of the Strapi SQLite database.

Когда вы запускаете команду npm run backup, это инициирует выполнение скрипта backup.js. 
Логика, которая запускается этим скриптом, включает в себя несколько основных шагов:

1) Инициализация конфигураций и логгера:

- Загружаются переменные окружения из файла .env.
- Настраивается логгер с использованием библиотеки winston.

2) Определение путей:

- Определяются пути к базе данных, каталогу для резервных копий и файлам журналов.

3) Создание резервной копии базы данных:

- Копируется файл базы данных в каталог для резервных копий.
- Записывается сообщение в журнал о создании резервной копии.
- Загрузка резервной копии в облачные хранилища (Google Drive и Yandex Disk):

4) Если переменные окружения GOOGLE_DRIVE_ENABLED и YANDEX_DISK_ENABLED установлены в true, резервная копия загружается в соответствующие облачные хранилища.

5) Записываются сообщения в журнал о процессе и результате загрузки.

6) Управление количеством резервных копий:

- Проверяется количество резервных копий в каталоге для резервных копий.
- Если количество резервных копий превышает заданный предел (MAX_BACKUPS), самые старые резервные копии удаляются.

7) Записываются сообщения в журнал о процессе и результате удаления старых резервных копий.

Скрипт запускается через менеджер процессов pm2.
